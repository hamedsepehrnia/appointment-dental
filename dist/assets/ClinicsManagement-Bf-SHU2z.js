import{j as e,c as D}from"./query-vendor-DvaUDqTV.js";import{u as k,a as j}from"./react-vendor-dTsWsAAn.js";import{c as T,t as S,d as M,s as A,b as R}from"./index-DQ7xL4Vx.js";import{u as E}from"./useAdminDashboardHeader-CFWWO3br.js";import{A as L}from"./AdminPagination-CimytDQx.js";import{T as P}from"./TableContainer-wezUMfoN.js";import{T as F,D as O}from"./DeleteModal-D56zs9AN.js";import{f as _}from"./helpers-DOyc9qlM.js";import{C as $}from"./ClinicManagementForm-LdcpS7p6.js";import{S as q}from"./SectionContainer-BxhawREw.js";import"./redux-vendor-5gwm_VuO.js";import"./ui-vendor-B68-Q-v-.js";import"./form-vendor--jwUxY8R.js";import"./motion-vendor-CQyDv_CV.js";import"./CustomTextArea-B6JEKYSx.js";function B(x){const t=T.c(15),{clinics:m,isLoadingClinics:f,page:l,onDeleteClick:o,onRefetch:a,isRefetching:p}=x,d=p===void 0?!1:p,g=k();let i;t[0]!==d||t[1]!==a?(i=a&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:a,disabled:d,className:"px-4 py-2 rounded-lg text-sm font-estedad-medium bg-primary/10 text-primary hover:bg-primary hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"بروزرسانی لیست",children:[d?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent"}):e.jsx("i",{className:"fas fa-sync-alt"}),"بروزرسانی"]})}),t[0]=d,t[1]=a,t[2]=i):i=t[2];let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx("thead",{className:"border-b border-main-border-color ",children:e.jsxs("tr",{className:"*:text-right *:p-4.5 *:text-nowrap",children:[e.jsx("th",{children:"ردیف"}),e.jsx("th",{children:"نام کلینیک"}),e.jsx("th",{children:"آدرس"}),e.jsx("th",{children:"شماره تماس"}),e.jsx("th",{children:"تعداد پزشکان"}),e.jsx("th",{children:"تاریخ ایجاد"}),e.jsx("th",{children:"عملیات"})]})}),t[3]=c):c=t[3];let n;t[4]!==m||t[5]!==f||t[6]!==g||t[7]!==o||t[8]!==l?(n=f?e.jsx(F,{rows:5,columns:7}):m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center p-8 font-estedad-light",children:"کلینیکی یافت نشد"})}):m.map((s,b)=>e.jsxs("tr",{className:"hover:bg-purple-400/10 text-dark *:p-4.5",children:[e.jsx("td",{className:"font-estedad-light text-center",children:(l-1)*5+b+1}),e.jsx("td",{className:"min-w-[200px]",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-estedad-light line-clamp-2",children:s.name}),s.description&&e.jsxs("span",{className:"text-xs font-estedad-light text-paragray line-clamp-2",children:[s.description.substring(0,30),"..."]})]})}),e.jsx("td",{className:"text-dark font-estedad-light min-w-[260px] max-w-[260px]",children:e.jsx("span",{className:"line-clamp-2",children:s.address})}),e.jsx("td",{className:"text-dark font-estedad-light",children:s.phoneNumber||"-"}),e.jsx("td",{className:"text-dark font-estedad-light text-center",children:s._count?.doctors||0}),e.jsx("td",{className:"text-dark font-estedad-light text-nowrap",children:s.createdAt?_(new Date(s.createdAt)):"-"}),e.jsx("td",{className:"",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{g(`/admin/clinics-management/edit/${s.id}`)},className:"p-1.5 rounded-full text-secondary bg-secondary/20 hover:bg-secondary hover:text-white transition",title:"ویرایش",children:e.jsx("i",{className:"far fa-edit"})}),e.jsx("button",{onClick:()=>o(s.id,s.name),className:"p-1.5 rounded-full text-red-500 bg-red-500/20 hover:bg-red-500 hover:text-white transition",title:"حذف",children:e.jsx("i",{className:"far fa-trash-alt"})})]})})]},s.id)),t[4]=m,t[5]=f,t[6]=g,t[7]=o,t[8]=l,t[9]=n):n=t[9];let r;t[10]!==n?(r=e.jsx(P,{withBg:!0,withMargin:!0,children:e.jsxs("table",{className:"w-full ",children:[c,e.jsx("tbody",{className:"divide-y divide-main-border-color",children:n})]})}),t[10]=n,t[11]=r):r=t[11];let h;return t[12]!==i||t[13]!==r?(h=e.jsxs(e.Fragment,{children:[i,r]}),t[12]=i,t[13]=r,t[14]=h):h=t[14],h}function se(){const{setHeaderConfig:x}=E(),[t,m]=j.useState(1),[f,l]=j.useState(!1),[o,a]=j.useState(null),[p,d]=j.useState(!1),g=D(),{mutateAsync:i}=S(),{data:c,isLoading:n,isPending:r,refetch:h,isFetching:s}=M(t,5);j.useEffect(()=>(x({title:"مدیریت کلینیک‌ها"}),()=>{x({title:void 0,backButton:!1})}),[x]);const b=(u,C)=>{a({id:u,name:C}),l(!0)},N=async()=>{if(o){d(!0);try{await i(o.id),A("کلینیک با موفقیت حذف شد"),g.invalidateQueries({queryKey:["clinics"]}),l(!1),a(null)}catch(u){const C=u?.response?.data?.message||"خطایی در حذف کلینیک رخ داد";R(C)}finally{d(!1)}}},y=()=>{p||(l(!1),a(null))},v=c?.data?.clinics||[],w=c?.meta;return e.jsxs("main",{children:[e.jsxs(q,{children:[e.jsx("h5",{className:"main-header ",children:"لیست کلینیک‌ها"}),e.jsx(B,{clinics:v,isLoadingClinics:n||r,page:t,onDeleteClick:b,onRefetch:h,isRefetching:s}),e.jsx("div",{className:"mb-12 mt-6",children:e.jsx(L,{meta:w,onPageChange:u=>m(u)})}),e.jsx("hr",{className:"my-6 border-2 rounded-4xl border-gray-500"}),e.jsx($,{})]}),e.jsx(O,{isOpen:f,onClose:y,onConfirm:N,title:"حذف کلینیک",message:`آیا از حذف کلینیک ${o?.name} اطمینان دارید؟ این عمل غیرقابل بازگشت است.`,confirmText:"حذف",cancelText:"انصراف",isLoading:p})]})}export{se as default};
