import{j as e}from"./query-vendor-DvaUDqTV.js";import{B as y}from"./Breadcrumb-ElZTU5M6.js";import{g as v,h as N,i as w,m as h,j as k,k as A,b as m,l as _,s as F}from"./index-D1LHzErR.js";import{u as E}from"./redux-vendor-5gwm_VuO.js";import{f as I,u as $,a as p,e as o,O as U}from"./react-vendor-dTsWsAAn.js";import"./ui-vendor-B68-Q-v-.js";import"./form-vendor--jwUxY8R.js";import"./motion-vendor-CQyDv_CV.js";function W(){const a=v(s=>s.user.data),x=I(),l=E(),u=$(),{mutateAsync:b}=N(),n=p.useRef(null),[d,f]=p.useState(!1),{mutateAsync:g}=w(),j=async s=>{const r=s.target.files?.[0];if(r){if(!r.type.startsWith("image/")){m("لطفاً یک فایل تصویری انتخاب کنید");return}if(r.size>5*1024*1024){m("حجم فایل نباید بیشتر از 5 مگابایت باشد");return}try{f(!0);const i=new FormData;i.append("profileImage",r);const t=await g(i);if(t?.data?.user){const c={...t.data.user,role:a?.role||t.data.user.role};l(_(c))}F("عکس پروفایل با موفقیت به‌روزرسانی شد"),n.current&&(n.current.value="")}catch(i){const t=i,c=typeof t.response?.data=="object"&&t.response?.data?.message?t.response.data.message:"خطا در آپلود عکس. لطفاً دوباره تلاش کنید.";m(c),console.error("خطا در آپلود عکس:",i)}finally{f(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx("section",{className:"py-12 overflow-x-hidden",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsxs(h.div,{className:"lg:col-span-1",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsxs("div",{className:`bg-[linear-gradient(45deg,_#E8F4F4_0%,_rgba(212,232,232,0.85)_28.13%,_rgba(245,232,212,0.90)_79.75%,_#FAF0E0_100%)]
 rounded-2xl shadow-sm p-6 mb-6 text-center `,children:[e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[e.jsx("img",{src:a?.profileImage?`http://localhost:4000${a.profileImage}`:a?.gender==="FEMALE"?"/images/female-user.jpeg":"/images/male-user.jpeg",alt:"user",className:"w-full h-full rounded-full object-cover"}),d&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),e.jsx("label",{htmlFor:"profile_photo",className:`absolute bottom-0 left-0 w-10 h-10 bg-white hover:bg-primary rounded-full flex items-center justify-center hover:text-white cursor-pointer transition ${d?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("i",{className:"fas fa-camera text-sm"})}),e.jsx("input",{id:"profile_photo",ref:n,type:"file",accept:"image/*",className:"hidden",onChange:j,disabled:d})]}),e.jsxs("h4",{className:"text-dark  font-estedad-verybold text-2xl mb-2",children:[a?.firstName," ",a?.lastName]}),e.jsxs("p",{className:"text-paragray font-estedad-light ",children:["آیدی بیمار: ",a?.phoneNumber,"+"]})]}),e.jsx("div",{className:"",children:e.jsxs("ul",{className:"space-y-6 p-2",children:[e.jsx("li",{className:"border border-[#1b1d1f14]  overflow-hidden rounded-[30px]",children:e.jsxs(o,{to:"/dashboard/profile",className:({isActive:s})=>` ${(s||x.pathname.startsWith("/dashboard/profile"))&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-3.5 px-5  bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold`,children:[e.jsx("span",{children:"پروفایل من"}),e.jsx("i",{className:"fas fa-angle-left"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14]  overflow-hidden rounded-[30px]",children:e.jsxs(o,{to:"/dashboard/turns",className:({isActive:s})=>` ${s&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-3.5 px-5  bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold`,children:[e.jsx("span",{children:"نوبت ها"}),e.jsx("i",{className:"fas fa-angle-left"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14]  overflow-hidden rounded-[30px]",children:e.jsxs(o,{to:"/dashboard/meeting-history",className:({isActive:s})=>` ${s&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-3.5 px-5  bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold`,children:[e.jsx("span",{children:"تاریخچه نوبت ها"}),e.jsx("i",{className:"fas fa-angle-left"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14]  overflow-hidden rounded-[30px]",children:e.jsxs(o,{to:"/dashboard/upcoming-meeting",className:({isActive:s})=>` ${s&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-3.5 px-5  bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold`,children:[e.jsx("span",{children:"نوبت های آینده"}),e.jsx("i",{className:"fas fa-angle-left"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14]  overflow-hidden rounded-[30px]",children:e.jsxs(o,{to:"/dashboard/messages",className:({isActive:s})=>` ${s&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-3.5 px-5  bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold`,children:[e.jsx("span",{children:"پیام ها"}),e.jsx("i",{className:"fas fa-angle-left"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14]  overflow-hidden rounded-[30px]",children:e.jsxs("button",{onClick:async()=>{await b(),console.log("hello"),l(k()),l(A()),u("/home",{replace:!0})},className:"flex items-center justify-between py-3.5 px-5  bg-secondary/80 hover:bg-secondary text-white transition w-full",children:[e.jsx("span",{children:"خروج"}),e.jsx("i",{className:"fas fa-angle-left"})]})})]})})]}),e.jsx(h.div,{className:"lg:col-span-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},children:e.jsx(U,{})})]})})})]})}export{W as default};
