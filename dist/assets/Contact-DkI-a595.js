import{b as S,j as e}from"./query-vendor-KlcNboas.js";import{m as g,C as h,f as y,h as f,i as w,c as j,j as N,k as F}from"./index-DIHBjxzH.js";import{B as C}from"./Breadcrumb-DPrnju3A.js";import{F as v,c as I,b as M,a as p}from"./form-vendor--t6BffNT.js";import{a as T}from"./useReviews-BddTHwHi.js";import{L as q,T as _,P,M as V,a as $}from"./map-vendor-D7zbCBAO.js";import{u as L}from"./useContact-C5BGI4jp.js";import{S as A,c as O}from"./ui-vendor-D4DdIvF_.js";import{a as z}from"./react-vendor-vqeg7uDR.js";import{S as D}from"./SEO-Cm68p2He.js";import"./redux-vendor-CGnCw5VP.js";import"./motion-vendor-CQyDv_CV.js";function E(){const{mutateAsync:s,isPending:a}=T(),n=S(),i=async(r,t)=>{try{const l=new FormData;l.append("name",r.name),l.append("content",r.content),l.append("rating",r.rating.toString()),r.profileImage&&l.append("profileImage",r.profileImage);const o=await s(l);f(o.message||"نظر شما با موفقیت ثبت شد. پس از تایید ادمین نمایش داده خواهد شد."),n.invalidateQueries({queryKey:["reviews"]}),t()}catch(l){console.log(l),w("خطایی در ثبت نظر رخ داد")}};return e.jsx("section",{className:"py-12 overflow-x-hidden ",children:e.jsxs("div",{className:"container mx-auto px-4 overflow-y-hidden",children:[e.jsxs(g.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-estedad-bold text-dark mb-3",children:"دیدگاه خود را ثبت کنید"}),e.jsx("p",{className:"text-paragray text-base md:text-lg max-w-2xl mx-auto",children:"نظرات و پیشنهادات شما برای ما ارزشمند است"})]}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx(g.div,{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0,amount:.3},children:e.jsx(v,{initialValues:{name:"",content:"",rating:5,profileImage:null},onSubmit:(r,{resetForm:t})=>i(r,t),validationSchema:I({name:p().required("نام الزامی است"),content:p().required("متن نظر الزامی است").min(10,"متن نظر باید حداقل 10 کاراکتر باشد"),rating:M().required("امتیاز الزامی است").min(1,"امتیاز باید بین 1 تا 5 باشد").max(5,"امتیاز باید بین 1 تا 5 باشد")}),children:r=>e.jsxs("form",{onSubmit:r.handleSubmit,className:"space-y-4",children:[e.jsx(h,{labelText:"نام",placeholder:"نام خود را وارد کنید",requiredText:!0,...r.getFieldProps("name"),errorMessage:r.touched.name&&r.errors.name?r.errors.name:null}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:["امتیاز",e.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>r.setFieldValue("rating",t),className:`text-2xl transition-colors ${t<=r.values.rating?"text-secondary":"text-gray-300"} hover:text-secondary`,children:e.jsx("i",{className:"fas fa-star"})},t)),e.jsxs("span",{className:"text-paragray text-sm mr-2",children:["(",r.values.rating," از 5)"]})]}),r.touched.rating&&r.errors.rating&&e.jsx("div",{className:"text-red-500 text-sm mt-1 mr-4",children:r.errors.rating})]}),e.jsx(y,{labelText:"متن نظر",placeholder:"نظر خود را بنویسید...",rows:5,requiredText:!0,className:"min-h-[120px] w-full",...r.getFieldProps("content"),errorMessage:r.touched.content&&r.errors.content?r.errors.content:null}),e.jsx("div",{children:e.jsx(h,{inputType:"file",labelText:"تصویر پروفایل (اختیاری)",placeholder:"تصویر پروفایل را انتخاب کنید",optional:!0,accept:"image/*",onChange:t=>{const l=t.target.files?.[0]||null;r.setFieldValue("profileImage",l)},errorMessage:r.touched.profileImage&&r.errors.profileImage?r.errors.profileImage:null})}),e.jsx("button",{type:"submit",className:"w-full main-btn group/btn relative flex items-center justify-center mt-6",disabled:a,children:a?e.jsx("div",{className:"btn-loader"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"group-hover/btn:translate-x-1 transition-all duration-200",children:"ثبت نظر"}),e.jsx("i",{className:"fas fa-comment absolute left-4 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-0 -translate-x-2 transition-all duration-200 text-sm"})]})})]})})})})]})})}const R=new q.Icon({iconUrl:"/images/leaflet/marker-icon.png",shadowUrl:"/images/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});function B(s){const a=j.c(18),{clinic:n}=s,i=n?.latitude!=null&&n?.longitude!=null;let r;a[0]!==n||a[1]!==i?(r=i?[n.latitude,n.longitude]:[35.6892,51.389],a[0]=n,a[1]=i,a[2]=r):r=a[2];const t=r;let l;a[3]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(_,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a[3]=l):l=a[3];const o=n?.name||"کلینیک دندانپزشکی";let d;a[4]!==o?(d=e.jsx(P,{children:o}),a[4]=o,a[5]=d):d=a[5];let m;a[6]!==t||a[7]!==d?(m=e.jsx(V,{position:t,icon:R,children:d}),a[6]=t,a[7]=d,a[8]=m):m=a[8];let x;a[9]!==t||a[10]!==m?(x=e.jsxs($,{className:"w-full h-full min-h-[370px] rounded-t-2xl z-10 flex-1",center:t,zoom:15,scrollWheelZoom:!0,children:[l,m]}),a[9]=t,a[10]=m,a[11]=x):x=a[11];let c;a[12]!==n||a[13]!==t?(c=n&&e.jsxs("div",{className:"bg-white rounded-b-2xl border-t-0 border border-gray-200 p-5 flex flex-col gap-3 shadow-sm",children:[e.jsx("h3",{className:"font-estedad-bold text-lg text-dark mb-1",children:n.name}),n.description&&e.jsx("p",{className:"text-sm text-paragray leading-relaxed line-clamp-2 mb-3",children:n.description}),e.jsx("div",{className:"w-full h-px bg-gray-200 my-2"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center shrink-0",children:e.jsx("i",{className:"fas fa-map-marker-alt text-blue-500 text-sm"})}),e.jsx("p",{className:"text-sm text-paragray flex-1 leading-relaxed",children:n.address})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-50 rounded-lg flex items-center justify-center shrink-0",children:e.jsx("i",{className:"fas fa-phone text-green-500 text-sm"})}),e.jsx("span",{className:"font-estedad-medium text-dark text-sm",children:n.phoneNumber})]}),e.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${t[0]},${t[1]}`,target:"_blank",rel:"noopener noreferrer",className:"mt-3 w-full main-btn group/btn relative flex items-center justify-center",children:[e.jsx("span",{className:"group-hover/btn:translate-x-1 transition-all duration-200",children:"مسیریابی روی نقشه"}),e.jsx("i",{className:"fas fa-route absolute left-4 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-0 -translate-x-2 transition-all duration-200 text-sm"})]})]}),a[12]=n,a[13]=t,a[14]=c):c=a[14];let u;return a[15]!==x||a[16]!==c?(u=e.jsx("div",{className:"relative h-full min-h-[400px]",children:e.jsxs("div",{className:"relative z-20 h-full flex flex-col",children:[x,c]})}),a[15]=x,a[16]=c,a[17]=u):u=a[17],u}const Q=s=>{const a=j.c(3);let n;a[0]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),a[0]=n):n=a[0];let i;return a[1]!==s?(i=e.jsx(O.DropdownIndicator,{...s,children:n}),a[1]=s,a[2]=i):i=a[2],i};function U(){const{mutateAsync:s,isPending:a}=L(),{data:n}=N(1,100),i=z.useMemo(()=>n?.data?.clinics?.map(t=>({value:t.id,label:t.name}))||[],[n?.data?.clinics]),r=async(t,l)=>{try{await s({name:t.name,email:t.email,phoneNumber:t.phone,subject:t.subject,message:t.message,clinicId:t.clinicId||null}),f("پیام شما با موفقیت ارسال شد"),l()}catch(o){console.log(o),w("خطایی رخ داده است")}};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100 h-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-estedad-bold text-dark mb-2",children:"پیام خود را ارسال کنید"}),e.jsx("p",{className:"text-paragray text-sm md:text-base",children:"فرم زیر را پر کنید تا در اسرع وقت با شما تماس بگیریم"})]}),e.jsx(v,{initialValues:{name:"",email:"",phone:"",subject:"",message:"",clinicId:null},onSubmit:(t,{resetForm:l})=>r(t,l),validationSchema:I({name:p().required("نام الزامی است"),email:p().email("ایمیل معتبر نیست"),phone:p().required("شماره الزامی است").test("is-valid-phone","شماره موبایل معتبر نمیباشد",t=>{try{return F(t),!0}catch(l){return console.log(l),!1}}),subject:p().required("موضوع الزامی است"),message:p().required("پیام الزامی است").min(10,"پیام باید حداقل 10 کاراکتر باشد"),clinicId:p().uuid().nullable()}),children:t=>e.jsx("form",{onSubmit:t.handleSubmit,className:"space-y-4",children:e.jsxs("div",{className:"md:grid xl:block  md:grid-cols-2  gap-6",children:[e.jsx(h,{placeholder:"نام",requiredText:!0,...t.getFieldProps("name"),errorMessage:t.touched.name&&t.errors.name?t.errors.name:null}),e.jsx(h,{placeholder:"ایمیل آدرس",optional:!0,inputType:"email",...t.getFieldProps("email"),errorMessage:t.touched.email&&t.errors.email?t.errors.email:null}),e.jsx(h,{placeholder:"شماره موبایل",requiredText:!0,inputType:"phone",...t.getFieldProps("phone"),errorMessage:t.touched.phone&&t.errors.phone?t.errors.phone:null}),e.jsx(h,{placeholder:"موضوع",requiredText:!0,...t.getFieldProps("subject"),errorMessage:t.touched.subject&&t.errors.subject?t.errors.subject:null}),e.jsxs("div",{children:[e.jsx(A,{options:i,value:i.find(l=>l.value===t.values.clinicId)||null,onChange:l=>{t.setFieldValue("clinicId",l?.value||null),t.setFieldTouched("clinicId",!0)},onBlur:()=>t.setFieldTouched("clinicId",!0),placeholder:"کلینیک را انتخاب کنید (اختیاری)",isClearable:!0,components:{DropdownIndicator:Q},classNames:{control:()=>"!text-dark px-5 !min-h-[52px] !rounded-lg !border-2 !border-main-border-color !focus:outline-none h-full !cursor-pointer",option:({isFocused:l,isSelected:o})=>`px-3 py-2 cursor-pointer !text-lg border-r-6 ${o?"!bg-primary text-white !cursor-pointer":l?"!text-secondary !cursor-pointer":"bg-white !cursor-pointer"}`,menu:()=>"!mt-0 !rounded-t-none shadow-lg bg-white overflow-hidden",placeholder:()=>"!text-paragray font-estedad-light"}}),e.jsx("div",{className:"text-red-500 text-[10px] mr-4 mt-1 min-h-[20px]",children:t.touched.clinicId&&t.errors.clinicId?t.errors.clinicId:null})]}),e.jsx(y,{placeholder:"پیام",rows:4,requiredText:!0,className:"min-h-[120px] w-full",...t.getFieldProps("message"),errorMessage:t.touched.message&&t.errors.message?t.errors.message:null}),e.jsx("button",{type:"submit",className:"main-btn group/btn relative flex items-center justify-center mt-6 col-span-2 justify-self-end",disabled:a,children:a?e.jsx("div",{className:"btn-loader"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"group-hover/btn:translate-x-1 transition-all duration-200",children:"ارسال پیام"}),e.jsx("i",{className:"fas fa-arrow-left absolute left-4 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-0 -translate-x-2 transition-all duration-200 text-sm"})]})})]})})})]})}function re(){const s=j.c(14),{data:a}=N(1,10);let n;s[0]!==a?.data?.clinics?(n=a?.data?.clinics||[],s[0]=a?.data?.clinics,s[1]=n):n=s[1];const i=n;let r,t;s[2]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsx(D,{title:"تماس با ما - کلینیک دندان پزشکی طاها",description:"تماس با کلینیک دندان پزشکی طاها - آدرس، شماره تماس، ایمیل و موقعیت کلینیک‌های ما. برای دریافت نوبت و مشاوره با ما تماس بگیرید",keywords:"تماس با ما, آدرس کلینیک, شماره تماس, موقعیت کلینیک, کلینیک طاها",url:"/contact"}),t=e.jsx(C,{}),s[2]=r,s[3]=t):(r=s[2],t=s[3]);let l,o,d,m;s[4]===Symbol.for("react.memo_cache_sentinel")?(l={opacity:0,y:30},o={opacity:1,y:0},d={duration:.6,ease:"easeOut"},m={once:!0,amount:.2},s[4]=l,s[5]=o,s[6]=d,s[7]=m):(l=s[4],o=s[5],d=s[6],m=s[7]);let x;s[8]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsx("div",{className:"xl:col-span-4",children:e.jsx(g.div,{initial:l,whileInView:o,transition:d,viewport:m,className:"lg:sticky lg:top-8 space-y-6",children:e.jsx(U,{})})}),s[8]=x):x=s[8];let c;s[9]!==i?(c=e.jsx("section",{className:"pt-6 pb-12 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid xl:grid-cols-12 gap-8 ",children:[x,e.jsx("div",{className:"xl:col-span-8 flex flex-col gap-y-6 ",children:i.length>0?e.jsxs(g.div,{className:"grow h-full flex flex-col",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.2},viewport:{once:!0,amount:.2},children:[e.jsxs("div",{className:"mb-6 lg:mt-9",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-estedad-bold text-dark mb-2",children:"موقعیت کلینیک‌های ما"}),e.jsx("p",{className:"text-paragray text-sm md:text-base",children:"برای مشاهده موقعیت دقیق کلینیک‌ها روی نقشه کلیک کنید"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 grow ",children:i.map(W)})]}):e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-4xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-paragray font-estedad-light text-lg",children:"کلینیکی ثبت نشده است"})]})})]})})}),s[9]=i,s[10]=c):c=s[10];let u;s[11]===Symbol.for("react.memo_cache_sentinel")?(u=e.jsx("section",{className:" ",children:e.jsx(E,{})}),s[11]=u):u=s[11];let b;return s[12]!==c?(b=e.jsxs(e.Fragment,{children:[r,t,c,u]}),s[12]=c,s[13]=b):b=s[13],b}function W(s,a){return e.jsx(g.div,{className:"flex flex-col ",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},viewport:{once:!0,amount:.2},children:e.jsx("div",{className:"grow bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100",children:e.jsx(B,{clinic:s})})},s.id)}export{re as default};
