import{r as b,j as t,g as $}from"./react-core-DkX7OQ4Q.js";import{v as L,aA as Q,C as d,e as v,h as q,s as B,i as G,Q as K,Y}from"./index-DUiqV2No.js";import{c as J,a as r,f as C,F as O}from"./forms-CxDKTD82.js";import{T}from"./TextEditor-CLQQFrLC.js";import{b as W}from"./query-x6gLKhnn.js";import"./vendor-BGjx4oOA.js";import"./map-dgLBSVMX.js";import"./motion-DV3VySaH.js";import"./editor-DLslrAMc.js";import"./react-router-CdfMEooj.js";import"./redux-T8ZA8Ca5.js";import"./ui-CioiL3KZ.js";import"./swiper-CgWgy0A2.js";import"./seo-D35OfG1v.js";const X=J({siteName:r(),siteTitle:r(),description:r(),logo:C().nullable(),email:r().email("ایمیل معتبر نیست"),phoneNumber:r(),address:r(),instagram:r().url("لینک معتبر نیست"),telegram:r().url("لینک معتبر نیست"),eitaa:r().url("لینک معتبر نیست"),whatsapp:r(),twitter:r().url("لینک معتبر نیست"),linkedin:r().url("لینک معتبر نیست"),facebook:r().url("لینک معتبر نیست"),youtube:r().url("لینک معتبر نیست"),workingHours:r(),aboutUsImage:C().nullable(),aboutUsVideo:C().nullable(),aboutUsContent:r(),contactUsImage:C().nullable(),contactUsVideo:C().nullable(),becomeDoctorContent:r(),becomeNurseContent:r()});function Z(){const n=b.useRef(null),i=b.useRef(null),u=b.useRef(null),c=b.useRef(null),p=b.useRef(null),F=W(),{data:A,isLoading:z}=L(),{mutateAsync:D}=Q(),[h,y]=b.useState(!1),[x,V]=b.useState(!1),[N,I]=b.useState(!1),a=A?.data?.settings,g=e=>e instanceof File,E=async(e,o)=>{try{const l=e.logo,m=e.aboutUsImage,j=e.aboutUsVideo,U=e.contactUsImage,f=e.contactUsVideo,M=l&&g(l)&&l.size>0,S=m&&g(m)&&m.size>0,R=j&&g(j)&&j.size>0,H=U&&g(U)&&U.size>0,P=f&&g(f)&&f.size>0;if(M||S||R||H||P||h||x||N){const s=new FormData;e.siteName!==void 0&&s.append("siteName",e.siteName),e.siteTitle!==void 0&&s.append("siteTitle",e.siteTitle),e.description!==void 0&&s.append("description",e.description),M&&g(l)?s.append("logo",l):(e.logo===null||e.logo===void 0)&&!h&&a?.logo&&s.append("logo",a.logo),e.email!==void 0&&s.append("email",e.email),e.phoneNumber!==void 0&&s.append("phoneNumber",e.phoneNumber),e.address!==void 0&&s.append("address",e.address),e.instagram!==void 0&&s.append("instagram",e.instagram),e.telegram!==void 0&&s.append("telegram",e.telegram),e.eitaa!==void 0&&s.append("eitaa",e.eitaa),e.whatsapp!==void 0&&s.append("whatsapp",e.whatsapp),e.twitter!==void 0&&s.append("twitter",e.twitter),e.linkedin!==void 0&&s.append("linkedin",e.linkedin),e.facebook!==void 0&&s.append("facebook",e.facebook),e.youtube!==void 0&&s.append("youtube",e.youtube),e.workingHours!==void 0&&s.append("workingHours",e.workingHours),e.aboutUsContent!==void 0&&s.append("aboutUsContent",e.aboutUsContent),e.becomeDoctorContent!==void 0&&s.append("becomeDoctorContent",e.becomeDoctorContent),e.becomeNurseContent!==void 0&&s.append("becomeNurseContent",e.becomeNurseContent),S&&g(m)?s.append("aboutUsImage",m):(e.aboutUsImage===null||e.aboutUsImage===void 0)&&!x&&a?.aboutUsImage&&s.append("aboutUsImage",a.aboutUsImage),R&&g(j)?s.append("aboutUsVideo",j):(e.aboutUsVideo===null||e.aboutUsVideo===void 0)&&a?.aboutUsVideo&&s.append("aboutUsVideo",a.aboutUsVideo),H&&g(U)?s.append("contactUsImage",U):(e.contactUsImage===null||e.contactUsImage===void 0)&&!N&&a?.contactUsImage&&s.append("contactUsImage",a.contactUsImage),P&&g(f)?s.append("contactUsVideo",f):(e.contactUsVideo===null||e.contactUsVideo===void 0)&&a?.contactUsVideo&&s.append("contactUsVideo",a.contactUsVideo),h&&s.append("removeLogo","true"),x&&s.append("removeAboutUsImage","true"),N&&s.append("removeContactUsImage","true");const w=await D(s);w?.data?.settings&&F.setQueryData(["settings"],w),y(!1),V(!1),I(!1),setTimeout(()=>{n.current&&(n.current.value=""),i.current&&(i.current.value=""),u.current&&(u.current.value=""),c.current&&(c.current.value=""),p.current&&(p.current.value=""),o.setFieldValue("logo",null),o.setFieldValue("aboutUsImage",null),o.setFieldValue("aboutUsVideo",null),o.setFieldValue("contactUsImage",null),o.setFieldValue("contactUsVideo",null)},0)}else{const s={};e.siteName!==void 0&&(s.siteName=e.siteName),e.siteTitle!==void 0&&(s.siteTitle=e.siteTitle),e.description!==void 0&&(s.description=e.description),e.email!==void 0&&(s.email=e.email),e.phoneNumber!==void 0&&(s.phoneNumber=e.phoneNumber),e.address!==void 0&&(s.address=e.address),e.instagram!==void 0&&(s.instagram=e.instagram),e.telegram!==void 0&&(s.telegram=e.telegram),e.eitaa!==void 0&&(s.eitaa=e.eitaa),e.whatsapp!==void 0&&(s.whatsapp=e.whatsapp),e.twitter!==void 0&&(s.twitter=e.twitter),e.linkedin!==void 0&&(s.linkedin=e.linkedin),e.facebook!==void 0&&(s.facebook=e.facebook),e.youtube!==void 0&&(s.youtube=e.youtube),e.workingHours!==void 0&&(s.workingHours=e.workingHours),e.aboutUsContent!==void 0&&(s.aboutUsContent=e.aboutUsContent),e.becomeDoctorContent!==void 0&&(s.becomeDoctorContent=e.becomeDoctorContent),e.becomeNurseContent!==void 0&&(s.becomeNurseContent=e.becomeNurseContent);const w=await D(s);w?.data?.settings&&F.setQueryData(["settings"],w)}B("تنظیمات با موفقیت به‌روزرسانی شد"),F.invalidateQueries({queryKey:["settings"]}),setTimeout(()=>{n.current&&(n.current.value=""),i.current&&(i.current.value=""),u.current&&(u.current.value=""),c.current&&(c.current.value=""),p.current&&(p.current.value="")},0)}catch(l){const m=l?.response?.data?.message||"خطایی در به‌روزرسانی تنظیمات رخ داد";G(m)}};return z?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):t.jsx(O,{initialValues:{siteName:a?.siteName||"",siteTitle:a?.siteTitle||"",description:a?.description||"",logo:null,email:a?.email||"",phoneNumber:a?.phoneNumber||"",address:a?.address||"",instagram:a?.instagram||"",telegram:a?.telegram||"",eitaa:a?.eitaa||"",whatsapp:a?.whatsapp||"",twitter:a?.twitter||"",linkedin:a?.linkedin||"",facebook:a?.facebook||"",youtube:a?.youtube||"",workingHours:a?.workingHours||"",aboutUsImage:null,aboutUsVideo:null,aboutUsContent:a?.aboutUsContent||"",contactUsImage:null,contactUsVideo:null,becomeDoctorContent:a?.becomeDoctorContent||"",becomeNurseContent:a?.becomeNurseContent||""},validationSchema:X,enableReinitialize:!0,onSubmit:(e,o)=>E(e,o),children:e=>t.jsxs("form",{onSubmit:e.handleSubmit,className:"space-y-6",children:[t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"اطلاعات اصلی سایت"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(d,{labelText:"نام سایت",placeholder:"نام سایت را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("siteName"),errorMessage:e.touched.siteName&&e.errors.siteName?e.errors.siteName:null}),t.jsx(d,{labelText:"عنوان سایت",placeholder:"عنوان سایت را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("siteTitle"),errorMessage:e.touched.siteTitle&&e.errors.siteTitle?e.errors.siteTitle:null}),t.jsx(d,{labelText:"ایمیل",placeholder:"ایمیل را وارد کنید",inputType:"email",className:"bg-white",optional:!0,...e.getFieldProps("email"),errorMessage:e.touched.email&&e.errors.email?e.errors.email:null}),t.jsx(d,{labelText:"شماره تماس",placeholder:"شماره تماس را وارد کنید",inputType:"phone",className:"bg-white",optional:!0,...e.getFieldProps("phoneNumber"),errorMessage:e.touched.phoneNumber&&e.errors.phoneNumber?e.errors.phoneNumber:null}),t.jsx(d,{labelText:"ساعات کاری",placeholder:"ساعات کاری را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("workingHours"),errorMessage:e.touched.workingHours&&e.errors.workingHours?e.errors.workingHours:null})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"لوگو"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap mb-4",children:[t.jsx("input",{ref:n,type:"file",accept:"image/*",className:"hidden",onChange:o=>{const l=o.target.files?.[0]||null;e.setFieldValue("logo",l),y(!1)}}),t.jsx("button",{type:"button",onClick:()=>{n.current?.click(),y(!1)},className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.logo&&e.values.logo instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.logo.name}),a?.logo&&!e.values.logo&&!h&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("img",{src:v(a.logo),alt:"لوگوی سایت",className:"w-12 h-12 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"لوگوی فعلی"}),t.jsx("button",{type:"button",onClick:()=>{y(!0),e.setFieldValue("logo",null),n.current&&(n.current.value="")},className:"px-4 py-1.5 text-sm rounded-lg font-estedad-medium bg-red-500/60 text-white hover:bg-red-600/60 transition-colors",children:"حذف لوگو"})]}),h&&t.jsx("span",{className:"text-sm text-red-500 font-estedad-light",children:"لوگو در حال حذف است"})]})]}),t.jsx(q,{labelText:"توضیحات",placeholder:"توضیحات سایت را وارد کنید",rows:4,className:"bg-white mt-4",optional:!0,...e.getFieldProps("description"),errorMessage:e.touched.description&&e.errors.description?e.errors.description:null}),t.jsx(d,{labelText:"آدرس",placeholder:"آدرس را وارد کنید",className:"bg-white mt-4",optional:!0,...e.getFieldProps("address"),errorMessage:e.touched.address&&e.errors.address?e.errors.address:null})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"شبکه‌های اجتماعی"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(d,{labelText:"اینستاگرام",placeholder:"لینک اینستاگرام را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("instagram"),errorMessage:e.touched.instagram&&e.errors.instagram?e.errors.instagram:null}),t.jsx(d,{labelText:"تلگرام",placeholder:"لینک تلگرام را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("telegram"),errorMessage:e.touched.telegram&&e.errors.telegram?e.errors.telegram:null}),t.jsx(d,{labelText:"ایتا",placeholder:"لینک ایتا را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("eitaa"),errorMessage:e.touched.eitaa&&e.errors.eitaa?e.errors.eitaa:null}),t.jsx(d,{labelText:"واتساپ",placeholder:"شماره واتساپ را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("whatsapp"),errorMessage:e.touched.whatsapp&&e.errors.whatsapp?e.errors.whatsapp:null}),t.jsx(d,{labelText:"توییتر",placeholder:"لینک توییتر را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("twitter"),errorMessage:e.touched.twitter&&e.errors.twitter?e.errors.twitter:null}),t.jsx(d,{labelText:"لینکدین",placeholder:"لینک لینکدین را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("linkedin"),errorMessage:e.touched.linkedin&&e.errors.linkedin?e.errors.linkedin:null}),t.jsx(d,{labelText:"فیسبوک",placeholder:"لینک فیسبوک را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("facebook"),errorMessage:e.touched.facebook&&e.errors.facebook?e.errors.facebook:null}),t.jsx(d,{labelText:"یوتیوب",placeholder:"لینک یوتیوب را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("youtube"),errorMessage:e.touched.youtube&&e.errors.youtube?e.errors.youtube:null})]})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"تصاویر و ویدیوها"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"تصویر صفحه درباره ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:o=>{const l=o.target.files?.[0]||null;e.setFieldValue("aboutUsImage",l),V(!1)}}),t.jsx("button",{type:"button",onClick:()=>{i.current?.click(),V(!1)},className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.aboutUsImage&&e.values.aboutUsImage instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.aboutUsImage.name}),a?.aboutUsImage&&!e.values.aboutUsImage&&!x&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("img",{src:v(a.aboutUsImage),alt:"تصویر درباره ما",className:"w-12 h-12 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"تصویر فعلی"}),t.jsx("button",{type:"button",onClick:()=>{V(!0),e.setFieldValue("aboutUsImage",null),i.current&&(i.current.value="")},className:"px-4 py-1.5 text-sm rounded-lg font-estedad-medium bg-red-500/60 text-white hover:bg-red-600/60 transition-colors",children:"حذف عکس"})]}),x&&t.jsx("span",{className:"text-sm text-red-500 font-estedad-light",children:"عکس در حال حذف است"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"ویدیو صفحه درباره ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:u,type:"file",accept:"video/*",className:"hidden",onChange:o=>{const l=o.target.files?.[0]||null;e.setFieldValue("aboutUsVideo",l)}}),t.jsx("button",{type:"button",onClick:()=>u.current?.click(),className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.aboutUsVideo&&e.values.aboutUsVideo instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.aboutUsVideo.name}),a?.aboutUsVideo&&!e.values.aboutUsVideo&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("video",{src:`${a.aboutUsVideo}`,controls:!0,className:"w-24 h-24 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"ویدیوی فعلی"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"تصویر صفحه تماس با ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:c,type:"file",accept:"image/*",className:"hidden",onChange:o=>{const l=o.target.files?.[0]||null;e.setFieldValue("contactUsImage",l),I(!1)}}),t.jsx("button",{type:"button",onClick:()=>{c.current?.click(),I(!1)},className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.contactUsImage&&e.values.contactUsImage instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.contactUsImage.name}),a?.contactUsImage&&!e.values.contactUsImage&&!N&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("img",{src:v(a.contactUsImage),alt:"تصویر تماس با ما",className:"w-12 h-12 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"تصویر فعلی"}),t.jsx("button",{type:"button",onClick:()=>{I(!0),e.setFieldValue("contactUsImage",null),c.current&&(c.current.value="")},className:"px-4 py-1.5 text-sm rounded-lg font-estedad-medium bg-red-500/60 text-white hover:bg-red-600/60 transition-colors",children:"حذف عکس"})]}),N&&t.jsx("span",{className:"text-sm text-red-500 font-estedad-light",children:"عکس در حال حذف است"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"ویدیو صفحه تماس با ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:p,type:"file",accept:"video/*",className:"hidden",onChange:o=>{const l=o.target.files?.[0]||null;e.setFieldValue("contactUsVideo",l)}}),t.jsx("button",{type:"button",onClick:()=>p.current?.click(),className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.contactUsVideo&&e.values.contactUsVideo instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.contactUsVideo.name}),a?.contactUsVideo&&!e.values.contactUsVideo&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("video",{src:`${a.contactUsVideo}`,controls:!0,className:"w-24 h-24 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"ویدیوی فعلی"})]})]})]})]})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"محتوای صفحه درباره ما"}),t.jsx(T,{value:e.values.aboutUsContent||"",onChange:o=>e.setFieldValue("aboutUsContent",o),labelText:"محتوای صفحه",placeholder:"محتوای صفحه درباره ما را اینجا وارد کنید...",errorMessage:e.touched.aboutUsContent&&e.errors.aboutUsContent?e.errors.aboutUsContent:null})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"محتوای صفحه دکتر شوید"}),t.jsx(T,{value:e.values.becomeDoctorContent||"",onChange:o=>e.setFieldValue("becomeDoctorContent",o),labelText:"محتوای صفحه",placeholder:"محتوای صفحه دکتر شوید را اینجا وارد کنید...",errorMessage:e.touched.becomeDoctorContent&&e.errors.becomeDoctorContent?e.errors.becomeDoctorContent:null})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"محتوای صفحه نرس شوید"}),t.jsx(T,{value:e.values.becomeNurseContent||"",onChange:o=>e.setFieldValue("becomeNurseContent",o),labelText:"محتوای صفحه",placeholder:"محتوای صفحه نرس شوید را اینجا وارد کنید...",errorMessage:e.touched.becomeNurseContent&&e.errors.becomeNurseContent?e.errors.becomeNurseContent:null})]}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsxs("button",{type:"submit",className:"purple-btn flex items-center gap-2",disabled:e.isSubmitting,children:["ذخیره تنظیمات",e.isSubmitting&&t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"})]})})]})})}function ge(){const n=$.c(4),{setHeaderConfig:i}=K();let u,c;n[0]!==i?(u=()=>(i({title:"تنظیمات سایت"}),()=>{i({title:void 0,backButton:!1})}),c=[i],n[0]=i,n[1]=u,n[2]=c):(u=n[1],c=n[2]),b.useEffect(u,c);let p;return n[3]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("main",{children:t.jsxs(Y,{children:[t.jsx("h5",{className:"main-header mb-6",children:"ویرایش تنظیمات"}),t.jsx(Z,{})]})}),n[3]=p):p=n[3],p}export{ge as default};
