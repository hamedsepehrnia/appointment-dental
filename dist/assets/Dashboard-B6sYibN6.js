import{j as e}from"./query-DkYU0mMV.js";import{B as y}from"./Breadcrumb-DhE3AIHF.js";import{E as v,G as N,H as w,m as f,f as _,I,J as k,k as c,K as A,s as E}from"./index-CjZRSo4d.js";import{u as F}from"./redux-BgAWEerc.js";import{u as U,c as C,r as x,d as p,O as D}from"./react-router-BDAfChV3.js";import"./react-core-DwtKV0qF.js";import"./ui-base-vsthQ4vg.js";import"./forms-C2N9TMf6.js";import"./motion-CQyDv_CV.js";import"./swiper-C43kgiy-.js";function z(){const s=v(a=>a.user.data),u=U(),o=F(),h=C(),{mutateAsync:g}=N(),l=x.useRef(null),[n,m]=x.useState(!1),{mutateAsync:b}=w(),j=async a=>{const r=a.target.files?.[0];if(r){if(!r.type.startsWith("image/")){c("لطفاً یک فایل تصویری انتخاب کنید");return}if(r.size>5*1024*1024){c("حجم فایل نباید بیشتر از 5 مگابایت باشد");return}try{m(!0);const i=new FormData;i.append("profileImage",r);const t=await b(i);if(t?.data?.user){const d={...t.data.user,role:s?.role||t.data.user.role};o(A(d))}E("عکس پروفایل با موفقیت به‌روزرسانی شد"),l.current&&(l.current.value="")}catch(i){const t=i,d=typeof t.response?.data=="object"&&t.response?.data?.message?t.response.data.message:"خطا در آپلود عکس. لطفاً دوباره تلاش کنید.";c(d),console.error("خطا در آپلود عکس:",i)}finally{m(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx("section",{className:"pt-2 pb-4 overflow-x-hidden",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-4",children:[e.jsxs(f.div,{className:"lg:col-span-1",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsxs("div",{className:`bg-[linear-gradient(45deg,_#E8F4F4_0%,_rgba(212,232,232,0.85)_28.13%,_rgba(245,232,212,0.90)_79.75%,_#FAF0E0_100%)]
 rounded-xl shadow-sm p-4 mb-3 text-center `,children:[e.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-2",children:[e.jsx("img",{src:s?.profileImage?_(s.profileImage):s?.gender==="FEMALE"?"/images/female-user.jpeg":"/images/male-user.jpeg",alt:"user",className:"w-full h-full rounded-full object-fill"}),n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"})}),e.jsx("label",{htmlFor:"profile_photo",className:`absolute bottom-0 left-0 w-8 h-8 bg-white hover:bg-primary rounded-full flex items-center justify-center hover:text-white cursor-pointer transition shadow-sm ${n?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("i",{className:"fas fa-camera text-xs"})}),e.jsx("input",{id:"profile_photo",ref:l,type:"file",accept:"image/*",className:"hidden",onChange:j,disabled:n})]}),e.jsxs("h4",{className:"text-dark font-estedad-verybold text-lg mb-1",children:[s?.firstName," ",s?.lastName]}),e.jsx("p",{className:"text-paragray font-estedad-light text-xs",children:s?.phoneNumber})]}),e.jsx("div",{className:"",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{className:"border border-[#1b1d1f14] overflow-hidden rounded-xl",children:e.jsxs(p,{to:"/dashboard/profile",className:({isActive:a})=>` ${(a||u.pathname.startsWith("/dashboard/profile"))&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-2.5 px-4 bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold text-sm`,children:[e.jsx("span",{children:"پروفایل من"}),e.jsx("i",{className:"fas fa-angle-left text-xs"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14] overflow-hidden rounded-xl",children:e.jsxs(p,{to:"/dashboard/turns",className:({isActive:a})=>` ${a&&"text-white bg-primary hover:bg-primary hover:text-white"} flex items-center justify-between py-2.5 px-4 bg-[#d4af370d] hover:bg-gray-100 transition text-dark font-estedad-semibold text-sm`,children:[e.jsx("span",{children:"نوبت ها"}),e.jsx("i",{className:"fas fa-angle-left text-xs"})]})}),e.jsx("li",{className:"border border-[#1b1d1f14] overflow-hidden rounded-xl",children:e.jsxs("button",{onClick:async()=>{await g(),console.log("hello"),o(I()),o(k()),h("/home",{replace:!0})},className:"flex items-center justify-between py-2.5 px-4 bg-secondary/80 hover:bg-secondary text-white transition w-full text-sm",children:[e.jsx("span",{children:"خروج"}),e.jsx("i",{className:"fas fa-angle-left text-xs"})]})})]})})]}),e.jsx(f.div,{className:"lg:col-span-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},children:e.jsx(D,{})})]})})})]})}export{z as default};
