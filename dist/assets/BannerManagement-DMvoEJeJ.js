import{j as e,c as T}from"./query-vendor-DvaUDqTV.js";import{c as y,s as L,b as M}from"./index-aQCH0W4b.js";import{u as A,a as f}from"./react-vendor-dTsWsAAn.js";import{u as R}from"./useAdminDashboardHeader-CFWWO3br.js";import{a as $,u as F}from"./useHeroSliders-BSfPWEAn.js";import{A as P}from"./AdminPagination-4Dw6uLrF.js";import{T as _}from"./TableContainer-CEnoSnre.js";import{T as E,D as H}from"./DeleteModal-6GmkfVBc.js";import{f as I}from"./helpers-DOyc9qlM.js";import{B as O}from"./BannerManagementForm-DjVQAeU-.js";import{S as q}from"./SectionContainer-Dtc5qGCy.js";import{h as Q,i as G}from"./ui-vendor-B68-Q-v-.js";import"./redux-vendor-5gwm_VuO.js";import"./motion-vendor-CQyDv_CV.js";import"./form-vendor--jwUxY8R.js";import"./TextEditor-DgVFnTog.js";import"./editor-vendor-B7Ps43eN.js";function J(l){const t=y.c(15),{banners:a,isLoadingBanners:r,page:g,onDeleteClick:j,onRefetch:d,isRefetching:x}=l,c=x===void 0?!1:x,h=A();let i;t[0]!==c||t[1]!==d?(i=d&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:d,disabled:c,className:"px-4 py-2 rounded-lg text-sm font-estedad-medium bg-primary/10 text-primary hover:bg-primary hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"بروزرسانی لیست",children:[c?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent"}):e.jsx("i",{className:"fas fa-sync-alt"}),"بروزرسانی"]})}),t[0]=c,t[1]=d,t[2]=i):i=t[2];let p;t[3]===Symbol.for("react.memo_cache_sentinel")?(p=e.jsx("thead",{className:"border-b border-main-border-color ",children:e.jsxs("tr",{className:"*:text-right *:p-4.5 *:text-nowrap",children:[e.jsx("th",{children:"ردیف"}),e.jsx("th",{children:"تصویر"}),e.jsx("th",{children:"عنوان"}),e.jsx("th",{children:"توضیحات"}),e.jsx("th",{children:"دکمه"}),e.jsx("th",{children:"ترتیب"}),e.jsx("th",{children:"وضعیت"}),e.jsx("th",{children:"تاریخ ایجاد"}),e.jsx("th",{children:"عملیات"})]})}),t[3]=p):p=t[3];let m;t[4]!==a||t[5]!==r||t[6]!==h||t[7]!==j||t[8]!==g?(m=r?e.jsx(E,{rows:5,columns:9}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center p-8 font-estedad-light",children:"بنری یافت نشد"})}):a.map((s,N)=>e.jsxs("tr",{className:"hover:bg-purple-400/10 text-dark *:p-4.5",children:[e.jsx("td",{className:"font-estedad-light text-center",children:(g-1)*5+N+1}),e.jsx("td",{className:"",children:s.image?e.jsx("img",{src:`${s.image}`,alt:s.title||"Banner",className:"w-16 h-16 rounded-lg object-cover shrink-0"}):e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-200 flex items-center justify-center shrink-0",children:e.jsx("i",{className:"far fa-image text-gray-400"})})}),e.jsx("td",{className:"text-dark font-estedad-light",children:e.jsx("span",{className:"line-clamp-2 max-w-[240px] min-w-[200px] ",children:s.title||"-"})}),e.jsx("td",{className:"text-dark font-estedad-light",children:e.jsx("div",{className:"line-clamp-2 max-w-[260px] min-w-[200px] ",dangerouslySetInnerHTML:{__html:s.description||"-"}})}),e.jsx("td",{className:"text-dark font-estedad-light",children:s.buttonText?e.jsxs("div",{className:"flex flex-col gap-1 min-w-[200px]",children:[e.jsx("span",{className:"text-xs line-clamp-2 max-w-[200px] ",children:s.buttonText}),s.buttonLink&&e.jsx("span",{className:"text-xs text-paragray truncate max-w-[200px] min-w-[150px]  line-clamp-2",children:s.buttonLink})]}):"-"}),e.jsx("td",{className:"text-dark font-estedad-light text-center",children:s.order}),e.jsx("td",{className:"text-dark font-estedad-light",children:s.published?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700 text-nowrap",children:"منتشر شده"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700 text-nowrap",children:"منتشر نشده"})}),e.jsx("td",{className:"text-dark font-estedad-light text-nowrap",children:s.createdAt?I(new Date(s.createdAt)):"-"}),e.jsx("td",{className:"",children:e.jsxs("div",{className:"flex items-center  gap-2",children:[e.jsx("button",{onClick:()=>{h(`/admin/banner-management/edit/${s.id}`)},className:"p-1.5 rounded-full text-secondary bg-secondary/20 hover:bg-secondary hover:text-white transition",title:"ویرایش",children:e.jsx("i",{className:"far fa-edit"})}),e.jsx("button",{onClick:()=>j(s.id,s.title||"بنر بدون عنوان"),className:"p-1.5 rounded-full text-red-500 bg-red-500/20 hover:bg-red-500 hover:text-white transition",title:"حذف",children:e.jsx("i",{className:"far fa-trash-alt"})})]})})]},s.id)),t[4]=a,t[5]=r,t[6]=h,t[7]=j,t[8]=g,t[9]=m):m=t[9];let o;t[10]!==m?(o=e.jsx(_,{withBg:!0,withMargin:!0,children:e.jsxs("table",{className:"w-full ",children:[p,e.jsx("tbody",{className:"divide-y divide-main-border-color",children:m})]})}),t[10]=m,t[11]=o):o=t[11];let u;return t[12]!==i||t[13]!==o?(u=e.jsxs(e.Fragment,{children:[i,o]}),t[12]=i,t[13]=o,t[14]=u):u=t[14],u}const K=l=>{const t=y.c(3);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),t[0]=a):a=t[0];let r;return t[1]!==l?(r=e.jsx(G.DropdownIndicator,{...l,children:a}),t[1]=l,t[2]=r):r=t[2],r},w=[{value:"",label:"همه"},{value:"true",label:"منتشر شده"},{value:"false",label:"منتشر نشده"}];function ce(){const{setHeaderConfig:l}=R(),[t,a]=f.useState(1),[r,g]=f.useState(""),[j,d]=f.useState(!1),[x,c]=f.useState(null),[h,i]=f.useState(!1),p=T(),{mutateAsync:m}=$(),{data:o,isLoading:u,isPending:s,refetch:N,isFetching:v}=F(t,5,r||void 0);f.useEffect(()=>(l({title:"مدیریت بنر"}),()=>{l({title:void 0,backButton:!1})}),[l]);const k=(n,b)=>{c({id:n,title:b}),d(!0)},C=async()=>{if(x){i(!0);try{await m(x.id),L("بنر با موفقیت حذف شد"),p.invalidateQueries({queryKey:["heroSliders"]}),d(!1),c(null)}catch(n){const b=n?.response?.data?.message||"خطایی در حذف بنر رخ داد";M(b)}finally{i(!1)}}},D=()=>{h||(d(!1),c(null))},S=o?.data?.sliders||[],B=o?.meta;return e.jsxs("main",{children:[e.jsxs(q,{children:[e.jsx("h5",{className:"main-header",children:"لیست بنرها"}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"فیلتر بر اساس وضعیت"}),e.jsx(Q,{options:w,value:w.find(n=>n.value===r),onChange:n=>{g(n?.value||""),a(1)},placeholder:"همه",components:{DropdownIndicator:K},classNames:{control:()=>"!text-dark px-5 !min-h-[52px] !rounded-lg !border-2 !border-main-border-color !focus:outline-none h-full !cursor-pointer",option:({isFocused:n,isSelected:b})=>`px-3 py-2 cursor-pointer !text-lg border-r-6 ${b?"!bg-primary text-white !cursor-pointer":n?"!text-secondary !cursor-pointer":"bg-white !cursor-pointer"}`,menu:()=>"!mt-0 !rounded-t-none shadow-lg bg-white overflow-hidden",placeholder:()=>"!text-dark"}})]})}),e.jsx(J,{banners:S,isLoadingBanners:u||s,page:t,onDeleteClick:k,onRefetch:N,isRefetching:v}),e.jsx("div",{className:"mb-12 mt-6",children:e.jsx(P,{meta:B,onPageChange:n=>a(n)})}),e.jsx("hr",{className:"my-6 border-2 rounded-4xl border-gray-500"}),e.jsx(O,{})]}),e.jsx(H,{isOpen:j,onClose:D,onConfirm:C,title:"حذف بنر",message:`آیا از حذف بنر "${x?.title}" اطمینان دارید؟ این عمل غیرقابل بازگشت است.`,confirmText:"حذف",cancelText:"انصراف",isLoading:h})]})}export{ce as default};
