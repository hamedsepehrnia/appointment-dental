import{b as F,j as e}from"./query-DkYU0mMV.js";import{j as _,m as b,C as h,k as y,s as w,l as N,c as j,n as v,o as C,S as M}from"./index-B2-mEqET.js";import{B as T}from"./Breadcrumb-R4VmXWRU.js";import{F as I,c as S,b as q,a as p}from"./forms-C2N9TMf6.js";import{L as P,T as $,P as V,M as A,a as L}from"./maps-mGxWqI5b.js";import{u as O}from"./useContact-BofG5dS_.js";import{S as z,c as D}from"./ui-base-vsthQ4vg.js";import{r as E}from"./react-router-BDAfChV3.js";import"./react-core-DwtKV0qF.js";import"./redux-BgAWEerc.js";import"./motion-CQyDv_CV.js";import"./swiper-C43kgiy-.js";function R(){const{mutateAsync:s,isPending:r}=_(),l=F(),i=async(a,t)=>{try{const n=new FormData;n.append("name",a.name),n.append("content",a.content),n.append("rating",a.rating.toString()),a.profileImage&&n.append("profileImage",a.profileImage);const o=await s(n);w(o.message||"نظر شما با موفقیت ثبت شد. پس از تایید ادمین نمایش داده خواهد شد."),l.invalidateQueries({queryKey:["reviews"]}),t()}catch(n){console.log(n),N("خطایی در ثبت نظر رخ داد")}};return e.jsx("section",{className:"py-12 overflow-x-hidden ",children:e.jsxs("div",{className:"container mx-auto px-4 overflow-y-hidden",children:[e.jsxs(b.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-estedad-bold text-dark mb-3",children:"دیدگاه خود را ثبت کنید"}),e.jsx("p",{className:"text-paragray text-base md:text-lg max-w-2xl mx-auto",children:"نظرات و پیشنهادات شما برای ما ارزشمند است"})]}),e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx(b.div,{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0,amount:.3},children:e.jsx(I,{initialValues:{name:"",content:"",rating:5,profileImage:null},onSubmit:(a,{resetForm:t})=>i(a,t),validationSchema:S({name:p().required("نام الزامی است"),content:p().required("متن نظر الزامی است").min(10,"متن نظر باید حداقل 10 کاراکتر باشد"),rating:q().required("امتیاز الزامی است").min(1,"امتیاز باید بین 1 تا 5 باشد").max(5,"امتیاز باید بین 1 تا 5 باشد")}),children:a=>e.jsxs("form",{onSubmit:a.handleSubmit,className:"space-y-4",children:[e.jsx(h,{labelText:"نام",placeholder:"نام خود را وارد کنید",requiredText:!0,...a.getFieldProps("name"),errorMessage:a.touched.name&&a.errors.name?a.errors.name:null}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:["امتیاز",e.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>a.setFieldValue("rating",t),className:`text-2xl transition-colors ${t<=a.values.rating?"text-secondary":"text-gray-300"} hover:text-secondary`,children:e.jsx("i",{className:"fas fa-star"})},t)),e.jsxs("span",{className:"text-paragray text-sm mr-2",children:["(",a.values.rating," از 5)"]})]}),a.touched.rating&&a.errors.rating&&e.jsx("div",{className:"text-red-500 text-sm mt-1 mr-4",children:a.errors.rating})]}),e.jsx(y,{labelText:"متن نظر",placeholder:"نظر خود را بنویسید...",rows:5,requiredText:!0,className:"min-h-[120px] w-full",...a.getFieldProps("content"),errorMessage:a.touched.content&&a.errors.content?a.errors.content:null}),e.jsx("div",{children:e.jsx(h,{inputType:"file",labelText:"تصویر پروفایل (اختیاری)",placeholder:"تصویر پروفایل را انتخاب کنید",optional:!0,accept:"image/*",onChange:t=>{const n=t.target.files?.[0]||null;a.setFieldValue("profileImage",n)},errorMessage:a.touched.profileImage&&a.errors.profileImage?a.errors.profileImage:null})}),e.jsx("button",{type:"submit",className:"w-full main-btn group/btn relative flex items-center justify-center mt-6",disabled:r,children:r?e.jsx("div",{className:"btn-loader"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"group-hover/btn:translate-x-1 transition-all duration-200",children:"ثبت نظر"}),e.jsx("i",{className:"fas fa-comment absolute left-4 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-0 -translate-x-2 transition-all duration-200 text-sm"})]})})]})})})})]})})}const B=new P.Icon({iconUrl:"/images/leaflet/marker-icon.png",shadowUrl:"/images/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});function W(s){const r=j.c(18),{clinic:l}=s,i=l?.latitude!=null&&l?.longitude!=null;let a;r[0]!==l||r[1]!==i?(a=i?[l.latitude,l.longitude]:[35.6892,51.389],r[0]=l,r[1]=i,r[2]=a):a=r[2];const t=a;let n;r[3]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx($,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r[3]=n):n=r[3];const o=l?.name||"کلینیک دندانپزشکی";let d;r[4]!==o?(d=e.jsx(V,{children:o}),r[4]=o,r[5]=d):d=r[5];let m;r[6]!==t||r[7]!==d?(m=e.jsx(A,{position:t,icon:B,children:d}),r[6]=t,r[7]=d,r[8]=m):m=r[8];let u;r[9]!==t||r[10]!==m?(u=e.jsxs(L,{className:"w-full h-full min-h-[370px] rounded-t-2xl z-10 flex-1",center:t,zoom:15,scrollWheelZoom:!0,children:[n,m]}),r[9]=t,r[10]=m,r[11]=u):u=r[11];let c;r[12]!==l||r[13]!==t?(c=l&&e.jsxs("div",{className:"bg-white rounded-b-2xl border-t-0 border border-gray-200 p-5 flex flex-col gap-3 shadow-sm",children:[e.jsx("h3",{className:"font-estedad-bold text-lg text-dark mb-1",children:l.name}),l.description&&e.jsx("p",{className:"text-sm text-paragray leading-relaxed line-clamp-2 mb-3",children:l.description}),e.jsx("div",{className:"w-full h-px bg-gray-200 my-2"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center shrink-0",children:e.jsx("i",{className:"fas fa-map-marker-alt text-blue-500 text-sm"})}),e.jsx("p",{className:"text-sm text-paragray flex-1 leading-relaxed",children:l.address})]}),e.jsx("div",{className:"flex flex-col gap-2",children:(()=>{const f=U(l.phoneNumber);return f.length>0?f.map(Q):null})()}),e.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${t[0]},${t[1]}`,target:"_blank",rel:"noopener noreferrer",className:"mt-3 w-full main-btn group/btn relative flex items-center justify-center",children:[e.jsx("span",{className:"group-hover/btn:translate-x-1 transition-all duration-200",children:"مسیریابی روی نقشه"}),e.jsx("i",{className:"fas fa-route absolute left-4 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-0 -translate-x-2 transition-all duration-200 text-sm"})]})]}),r[12]=l,r[13]=t,r[14]=c):c=r[14];let x;return r[15]!==u||r[16]!==c?(x=e.jsx("div",{className:"relative h-full min-h-[400px]",children:e.jsxs("div",{className:"relative z-20 h-full flex flex-col",children:[u,c]})}),r[15]=u,r[16]=c,r[17]=x):x=r[17],x}function Q(s,r){return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-50 rounded-lg flex items-center justify-center shrink-0",children:e.jsx("i",{className:"fas fa-phone text-green-500 text-sm"})}),e.jsx("a",{href:`tel:${s}`,className:"font-estedad-medium text-dark text-sm hover:text-primary transition-colors",children:s})]},r)}function U(s){if(!s)return[];if(Array.isArray(s))return s.filter(H);if(typeof s=="string"){const r=s.trim();if(r.startsWith("[")&&r.endsWith("]"))try{const l=JSON.parse(r);if(Array.isArray(l))return l.filter(Z).map(K)}catch{}return r.split(/[,|;|\n]/).map(J).filter(G)}return[]}function G(s){return s}function J(s){return s.trim()}function K(s){return String(s).trim()}function Z(s){return s&&String(s).trim()}function H(s){return s&&s.trim()}const X=s=>{const r=j.c(3);let l;r[0]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),r[0]=l):l=r[0];let i;return r[1]!==s?(i=e.jsx(D.DropdownIndicator,{...s,children:l}),r[1]=s,r[2]=i):i=r[2],i};function Y(){const{mutateAsync:s,isPending:r}=O(),{data:l}=v(1,100),i=E.useMemo(()=>l?.data?.clinics?.map(t=>({value:t.id,label:t.name}))||[],[l?.data?.clinics]),a=async(t,n)=>{try{await s({name:t.name,email:t.email,phoneNumber:t.phone,subject:t.subject,message:t.message,clinicId:t.clinicId||null}),w("پیام شما با موفقیت ارسال شد"),n()}catch(o){console.log(o),N("خطایی رخ داده است")}};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8 border border-gray-100 h-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-estedad-bold text-dark mb-2",children:"پیام خود را ارسال کنید"}),e.jsx("p",{className:"text-paragray text-sm md:text-base",children:"فرم زیر را پر کنید تا در اسرع وقت با شما تماس بگیریم"})]}),e.jsx(I,{initialValues:{name:"",email:"",phone:"",subject:"",message:"",clinicId:null},onSubmit:(t,{resetForm:n})=>a(t,n),validationSchema:S({name:p().required("نام الزامی است"),email:p().email("ایمیل معتبر نیست"),phone:p().required("شماره الزامی است").test("is-valid-phone","شماره موبایل معتبر نمیباشد",t=>{try{return C(t),!0}catch(n){return console.log(n),!1}}),subject:p().required("موضوع الزامی است"),message:p().required("پیام الزامی است").min(10,"پیام باید حداقل 10 کاراکتر باشد"),clinicId:p().uuid().nullable()}),children:t=>e.jsx("form",{onSubmit:t.handleSubmit,className:"space-y-4",children:e.jsxs("div",{className:"md:grid xl:block  md:grid-cols-2  gap-6",children:[e.jsx(h,{placeholder:"نام",requiredText:!0,...t.getFieldProps("name"),errorMessage:t.touched.name&&t.errors.name?t.errors.name:null}),e.jsx(h,{placeholder:"ایمیل آدرس",optional:!0,inputType:"email",...t.getFieldProps("email"),errorMessage:t.touched.email&&t.errors.email?t.errors.email:null}),e.jsx(h,{placeholder:"شماره موبایل",requiredText:!0,inputType:"phone",...t.getFieldProps("phone"),errorMessage:t.touched.phone&&t.errors.phone?t.errors.phone:null}),e.jsx(h,{placeholder:"موضوع",requiredText:!0,...t.getFieldProps("subject"),errorMessage:t.touched.subject&&t.errors.subject?t.errors.subject:null}),e.jsxs("div",{children:[e.jsx(z,{options:i,value:i.find(n=>n.value===t.values.clinicId)||null,onChange:n=>{t.setFieldValue("clinicId",n?.value||null),t.setFieldTouched("clinicId",!0)},onBlur:()=>t.setFieldTouched("clinicId",!0),placeholder:"کلینیک را انتخاب کنید (اختیاری)",isClearable:!0,components:{DropdownIndicator:X},classNames:{control:()=>"!text-dark px-5 !min-h-[52px] !rounded-lg !border-2 !border-main-border-color !focus:outline-none h-full !cursor-pointer",option:({isFocused:n,isSelected:o})=>`px-3 py-2 cursor-pointer !text-lg border-r-6 ${o?"!bg-primary text-white !cursor-pointer":n?"!text-secondary !cursor-pointer":"bg-white !cursor-pointer"}`,menu:()=>"!mt-0 !rounded-t-none shadow-lg bg-white overflow-hidden",placeholder:()=>"!text-paragray font-estedad-light"}}),e.jsx("div",{className:"text-red-500 text-[10px] mr-4 mt-1 min-h-[20px]",children:t.touched.clinicId&&t.errors.clinicId?t.errors.clinicId:null})]}),e.jsx(y,{placeholder:"پیام",rows:4,requiredText:!0,className:"min-h-[120px] w-full",...t.getFieldProps("message"),errorMessage:t.touched.message&&t.errors.message?t.errors.message:null}),e.jsx("button",{type:"submit",className:"main-btn group/btn relative flex items-center justify-center mt-6 col-span-2 justify-self-end",disabled:r,children:r?e.jsx("div",{className:"btn-loader"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"group-hover/btn:translate-x-1 transition-all duration-200",children:"ارسال پیام"}),e.jsx("i",{className:"fas fa-arrow-left absolute left-4 opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-0 -translate-x-2 transition-all duration-200 text-sm"})]})})]})})})]})}function ue(){const s=j.c(14),{data:r}=v(1,10);let l;s[0]!==r?.data?.clinics?(l=r?.data?.clinics||[],s[0]=r?.data?.clinics,s[1]=l):l=s[1];const i=l;let a,t;s[2]===Symbol.for("react.memo_cache_sentinel")?(a=e.jsx(M,{title:"تماس با ما - کلینیک دندان پزشکی طاها",description:"تماس با کلینیک دندان پزشکی طاها - آدرس، شماره تماس، ایمیل و موقعیت کلینیک‌های ما. برای دریافت نوبت و مشاوره با ما تماس بگیرید",keywords:"تماس با ما, آدرس کلینیک, شماره تماس, موقعیت کلینیک, کلینیک طاها",url:"/contact"}),t=e.jsx(T,{}),s[2]=a,s[3]=t):(a=s[2],t=s[3]);let n,o,d,m;s[4]===Symbol.for("react.memo_cache_sentinel")?(n={opacity:0,y:30},o={opacity:1,y:0},d={duration:.6,ease:"easeOut"},m={once:!0,amount:.2},s[4]=n,s[5]=o,s[6]=d,s[7]=m):(n=s[4],o=s[5],d=s[6],m=s[7]);let u;s[8]===Symbol.for("react.memo_cache_sentinel")?(u=e.jsx("div",{className:"xl:col-span-4",children:e.jsx(b.div,{initial:n,whileInView:o,transition:d,viewport:m,className:"lg:sticky lg:top-8 space-y-6",children:e.jsx(Y,{})})}),s[8]=u):u=s[8];let c;s[9]!==i?(c=e.jsx("section",{className:"pt-6 pb-12 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid xl:grid-cols-12 gap-8 ",children:[u,e.jsx("div",{className:"xl:col-span-8 flex flex-col gap-y-6 ",children:i.length>0?e.jsxs(b.div,{className:"grow h-full flex flex-col",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.2},viewport:{once:!0,amount:.2},children:[e.jsxs("div",{className:"mb-6 lg:mt-9",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-estedad-bold text-dark mb-2",children:"موقعیت کلینیک‌های ما"}),e.jsx("p",{className:"text-paragray text-sm md:text-base",children:"برای مشاهده موقعیت دقیق کلینیک‌ها روی نقشه کلیک کنید"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 grow ",children:i.map(k)})]}):e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-4xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-paragray font-estedad-light text-lg",children:"کلینیکی ثبت نشده است"})]})})]})})}),s[9]=i,s[10]=c):c=s[10];let x;s[11]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsx("section",{className:" ",children:e.jsx(R,{})}),s[11]=x):x=s[11];let g;return s[12]!==c?(g=e.jsxs(e.Fragment,{children:[a,t,c,x]}),s[12]=c,s[13]=g):g=s[13],g}function k(s,r){return e.jsx(b.div,{className:"flex flex-col ",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:r*.1},viewport:{once:!0,amount:.2},children:e.jsx("div",{className:"grow bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100",children:e.jsx(W,{clinic:s})})},s.id)}export{ue as default};
