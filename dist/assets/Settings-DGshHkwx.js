import{c as z,j as t}from"./query-vendor-DvaUDqTV.js";import{a as E,z as L,C as c,s as Q,b as q,c as B}from"./index-J2TYnO22.js";import{a as m}from"./react-vendor-dTsWsAAn.js";import{u as G}from"./useAdminDashboardHeader-CFWWO3br.js";import{S as K}from"./SectionContainer-B65ywGCw.js";import{c as J,a as l,f as y,F as O}from"./form-vendor--jwUxY8R.js";import{C as W}from"./CustomTextArea-C__Mc83G.js";import{T as H}from"./TextEditor-BkK2QN4_.js";import"./redux-vendor-5gwm_VuO.js";import"./ui-vendor-B68-Q-v-.js";import"./motion-vendor-CQyDv_CV.js";import"./editor-vendor-B7Ps43eN.js";const X=J({siteName:l(),siteTitle:l(),description:l(),logo:y().nullable(),email:l().email("ایمیل معتبر نیست"),phoneNumber:l(),address:l(),instagram:l().url("لینک معتبر نیست"),telegram:l().url("لینک معتبر نیست"),whatsapp:l(),twitter:l().url("لینک معتبر نیست"),linkedin:l().url("لینک معتبر نیست"),facebook:l().url("لینک معتبر نیست"),youtube:l().url("لینک معتبر نیست"),workingHours:l(),aboutUsImage:y().nullable(),aboutUsVideo:y().nullable(),aboutUsContent:l(),contactUsImage:y().nullable(),contactUsVideo:y().nullable(),becomeDoctorContent:l()});function Y(){const n=m.useRef(null),i=m.useRef(null),u=m.useRef(null),d=m.useRef(null),p=m.useRef(null),v=z(),{data:P,isLoading:A}=E(),{mutateAsync:F}=L(),[h,C]=m.useState(!1),[x,V]=m.useState(!1),[f,I]=m.useState(!1),a=P?.data?.settings,g=e=>e instanceof File,$=async(e,o)=>{try{const r=e.logo,b=e.aboutUsImage,N=e.aboutUsVideo,j=e.contactUsImage,U=e.contactUsVideo,T=r&&g(r)&&r.size>0,D=b&&g(b)&&b.size>0,S=N&&g(N)&&N.size>0,M=j&&g(j)&&j.size>0,R=U&&g(U)&&U.size>0;if(T||D||S||M||R||h||x||f){const s=new FormData;e.siteName!==void 0&&s.append("siteName",e.siteName),e.siteTitle!==void 0&&s.append("siteTitle",e.siteTitle),e.description!==void 0&&s.append("description",e.description),T&&g(r)?s.append("logo",r):(e.logo===null||e.logo===void 0)&&!h&&a?.logo&&s.append("logo",a.logo),e.email!==void 0&&s.append("email",e.email),e.phoneNumber!==void 0&&s.append("phoneNumber",e.phoneNumber),e.address!==void 0&&s.append("address",e.address),e.instagram!==void 0&&s.append("instagram",e.instagram),e.telegram!==void 0&&s.append("telegram",e.telegram),e.whatsapp!==void 0&&s.append("whatsapp",e.whatsapp),e.twitter!==void 0&&s.append("twitter",e.twitter),e.linkedin!==void 0&&s.append("linkedin",e.linkedin),e.facebook!==void 0&&s.append("facebook",e.facebook),e.youtube!==void 0&&s.append("youtube",e.youtube),e.workingHours!==void 0&&s.append("workingHours",e.workingHours),e.aboutUsContent!==void 0&&s.append("aboutUsContent",e.aboutUsContent),e.becomeDoctorContent!==void 0&&s.append("becomeDoctorContent",e.becomeDoctorContent),D&&g(b)?s.append("aboutUsImage",b):(e.aboutUsImage===null||e.aboutUsImage===void 0)&&!x&&a?.aboutUsImage&&s.append("aboutUsImage",a.aboutUsImage),S&&g(N)?s.append("aboutUsVideo",N):(e.aboutUsVideo===null||e.aboutUsVideo===void 0)&&a?.aboutUsVideo&&s.append("aboutUsVideo",a.aboutUsVideo),M&&g(j)?s.append("contactUsImage",j):(e.contactUsImage===null||e.contactUsImage===void 0)&&!f&&a?.contactUsImage&&s.append("contactUsImage",a.contactUsImage),R&&g(U)?s.append("contactUsVideo",U):(e.contactUsVideo===null||e.contactUsVideo===void 0)&&a?.contactUsVideo&&s.append("contactUsVideo",a.contactUsVideo),h&&s.append("removeLogo","true"),x&&s.append("removeAboutUsImage","true"),f&&s.append("removeContactUsImage","true");const w=await F(s);w?.data?.settings&&v.setQueryData(["settings"],w),C(!1),V(!1),I(!1),setTimeout(()=>{n.current&&(n.current.value=""),i.current&&(i.current.value=""),u.current&&(u.current.value=""),d.current&&(d.current.value=""),p.current&&(p.current.value=""),o.setFieldValue("logo",null),o.setFieldValue("aboutUsImage",null),o.setFieldValue("aboutUsVideo",null),o.setFieldValue("contactUsImage",null),o.setFieldValue("contactUsVideo",null)},0)}else{const s={};e.siteName!==void 0&&(s.siteName=e.siteName),e.siteTitle!==void 0&&(s.siteTitle=e.siteTitle),e.description!==void 0&&(s.description=e.description),e.email!==void 0&&(s.email=e.email),e.phoneNumber!==void 0&&(s.phoneNumber=e.phoneNumber),e.address!==void 0&&(s.address=e.address),e.instagram!==void 0&&(s.instagram=e.instagram),e.telegram!==void 0&&(s.telegram=e.telegram),e.whatsapp!==void 0&&(s.whatsapp=e.whatsapp),e.twitter!==void 0&&(s.twitter=e.twitter),e.linkedin!==void 0&&(s.linkedin=e.linkedin),e.facebook!==void 0&&(s.facebook=e.facebook),e.youtube!==void 0&&(s.youtube=e.youtube),e.workingHours!==void 0&&(s.workingHours=e.workingHours),e.aboutUsContent!==void 0&&(s.aboutUsContent=e.aboutUsContent),e.becomeDoctorContent!==void 0&&(s.becomeDoctorContent=e.becomeDoctorContent);const w=await F(s);w?.data?.settings&&v.setQueryData(["settings"],w)}Q("تنظیمات با موفقیت به‌روزرسانی شد"),v.invalidateQueries({queryKey:["settings"]}),setTimeout(()=>{n.current&&(n.current.value=""),i.current&&(i.current.value=""),u.current&&(u.current.value=""),d.current&&(d.current.value=""),p.current&&(p.current.value="")},0)}catch(r){const b=r?.response?.data?.message||"خطایی در به‌روزرسانی تنظیمات رخ داد";q(b)}};return A?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}):t.jsx(O,{initialValues:{siteName:a?.siteName||"",siteTitle:a?.siteTitle||"",description:a?.description||"",logo:null,email:a?.email||"",phoneNumber:a?.phoneNumber||"",address:a?.address||"",instagram:a?.instagram||"",telegram:a?.telegram||"",whatsapp:a?.whatsapp||"",twitter:a?.twitter||"",linkedin:a?.linkedin||"",facebook:a?.facebook||"",youtube:a?.youtube||"",workingHours:a?.workingHours||"",aboutUsImage:null,aboutUsVideo:null,aboutUsContent:a?.aboutUsContent||"",contactUsImage:null,contactUsVideo:null,becomeDoctorContent:a?.becomeDoctorContent||""},validationSchema:X,enableReinitialize:!0,onSubmit:(e,o)=>$(e,o),children:e=>t.jsxs("form",{onSubmit:e.handleSubmit,className:"space-y-6",children:[t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"اطلاعات اصلی سایت"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(c,{labelText:"نام سایت",placeholder:"نام سایت را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("siteName"),errorMessage:e.touched.siteName&&e.errors.siteName?e.errors.siteName:null}),t.jsx(c,{labelText:"عنوان سایت",placeholder:"عنوان سایت را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("siteTitle"),errorMessage:e.touched.siteTitle&&e.errors.siteTitle?e.errors.siteTitle:null}),t.jsx(c,{labelText:"ایمیل",placeholder:"ایمیل را وارد کنید",inputType:"email",className:"bg-white",optional:!0,...e.getFieldProps("email"),errorMessage:e.touched.email&&e.errors.email?e.errors.email:null}),t.jsx(c,{labelText:"شماره تماس",placeholder:"شماره تماس را وارد کنید",inputType:"phone",className:"bg-white",optional:!0,...e.getFieldProps("phoneNumber"),errorMessage:e.touched.phoneNumber&&e.errors.phoneNumber?e.errors.phoneNumber:null}),t.jsx(c,{labelText:"ساعات کاری",placeholder:"ساعات کاری را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("workingHours"),errorMessage:e.touched.workingHours&&e.errors.workingHours?e.errors.workingHours:null})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"لوگو"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap mb-4",children:[t.jsx("input",{ref:n,type:"file",accept:"image/*",className:"hidden",onChange:o=>{const r=o.target.files?.[0]||null;e.setFieldValue("logo",r),C(!1)}}),t.jsx("button",{type:"button",onClick:()=>{n.current?.click(),C(!1)},className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.logo&&e.values.logo instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.logo.name}),a?.logo&&!e.values.logo&&!h&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("img",{src:`${a.logo}`,alt:"لوگوی سایت",className:"w-12 h-12 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"لوگوی فعلی"}),t.jsx("button",{type:"button",onClick:()=>{C(!0),e.setFieldValue("logo",null),n.current&&(n.current.value="")},className:"px-4 py-1.5 text-sm rounded-lg font-estedad-medium bg-red-500/60 text-white hover:bg-red-600/60 transition-colors",children:"حذف لوگو"})]}),h&&t.jsx("span",{className:"text-sm text-red-500 font-estedad-light",children:"لوگو در حال حذف است"})]})]}),t.jsx(W,{labelText:"توضیحات",placeholder:"توضیحات سایت را وارد کنید",rows:4,className:"bg-white mt-4",optional:!0,...e.getFieldProps("description"),errorMessage:e.touched.description&&e.errors.description?e.errors.description:null}),t.jsx(c,{labelText:"آدرس",placeholder:"آدرس را وارد کنید",className:"bg-white mt-4",optional:!0,...e.getFieldProps("address"),errorMessage:e.touched.address&&e.errors.address?e.errors.address:null})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"شبکه‌های اجتماعی"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(c,{labelText:"اینستاگرام",placeholder:"لینک اینستاگرام را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("instagram"),errorMessage:e.touched.instagram&&e.errors.instagram?e.errors.instagram:null}),t.jsx(c,{labelText:"تلگرام",placeholder:"لینک تلگرام را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("telegram"),errorMessage:e.touched.telegram&&e.errors.telegram?e.errors.telegram:null}),t.jsx(c,{labelText:"واتساپ",placeholder:"شماره واتساپ را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("whatsapp"),errorMessage:e.touched.whatsapp&&e.errors.whatsapp?e.errors.whatsapp:null}),t.jsx(c,{labelText:"توییتر",placeholder:"لینک توییتر را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("twitter"),errorMessage:e.touched.twitter&&e.errors.twitter?e.errors.twitter:null}),t.jsx(c,{labelText:"لینکدین",placeholder:"لینک لینکدین را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("linkedin"),errorMessage:e.touched.linkedin&&e.errors.linkedin?e.errors.linkedin:null}),t.jsx(c,{labelText:"فیسبوک",placeholder:"لینک فیسبوک را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("facebook"),errorMessage:e.touched.facebook&&e.errors.facebook?e.errors.facebook:null}),t.jsx(c,{labelText:"یوتیوب",placeholder:"لینک یوتیوب را وارد کنید",className:"bg-white",optional:!0,...e.getFieldProps("youtube"),errorMessage:e.touched.youtube&&e.errors.youtube?e.errors.youtube:null})]})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"تصاویر و ویدیوها"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"تصویر صفحه درباره ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:o=>{const r=o.target.files?.[0]||null;e.setFieldValue("aboutUsImage",r),V(!1)}}),t.jsx("button",{type:"button",onClick:()=>{i.current?.click(),V(!1)},className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.aboutUsImage&&e.values.aboutUsImage instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.aboutUsImage.name}),a?.aboutUsImage&&!e.values.aboutUsImage&&!x&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("img",{src:`${a.aboutUsImage}`,alt:"تصویر درباره ما",className:"w-12 h-12 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"تصویر فعلی"}),t.jsx("button",{type:"button",onClick:()=>{V(!0),e.setFieldValue("aboutUsImage",null),i.current&&(i.current.value="")},className:"px-4 py-1.5 text-sm rounded-lg font-estedad-medium bg-red-500/60 text-white hover:bg-red-600/60 transition-colors",children:"حذف عکس"})]}),x&&t.jsx("span",{className:"text-sm text-red-500 font-estedad-light",children:"عکس در حال حذف است"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"ویدیو صفحه درباره ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:u,type:"file",accept:"video/*",className:"hidden",onChange:o=>{const r=o.target.files?.[0]||null;e.setFieldValue("aboutUsVideo",r)}}),t.jsx("button",{type:"button",onClick:()=>u.current?.click(),className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.aboutUsVideo&&e.values.aboutUsVideo instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.aboutUsVideo.name}),a?.aboutUsVideo&&!e.values.aboutUsVideo&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("video",{src:`${a.aboutUsVideo}`,controls:!0,className:"w-24 h-24 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"ویدیوی فعلی"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"تصویر صفحه تماس با ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:d,type:"file",accept:"image/*",className:"hidden",onChange:o=>{const r=o.target.files?.[0]||null;e.setFieldValue("contactUsImage",r),I(!1)}}),t.jsx("button",{type:"button",onClick:()=>{d.current?.click(),I(!1)},className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.contactUsImage&&e.values.contactUsImage instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.contactUsImage.name}),a?.contactUsImage&&!e.values.contactUsImage&&!f&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("img",{src:`${a.contactUsImage}`,alt:"تصویر تماس با ما",className:"w-12 h-12 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"تصویر فعلی"}),t.jsx("button",{type:"button",onClick:()=>{I(!0),e.setFieldValue("contactUsImage",null),d.current&&(d.current.value="")},className:"px-4 py-1.5 text-sm rounded-lg font-estedad-medium bg-red-500/60 text-white hover:bg-red-600/60 transition-colors",children:"حذف عکس"})]}),f&&t.jsx("span",{className:"text-sm text-red-500 font-estedad-light",children:"عکس در حال حذف است"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-dark font-estedad-lightbold mb-2 mr-4",children:"ویدیو صفحه تماس با ما"}),t.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.jsx("input",{ref:p,type:"file",accept:"video/*",className:"hidden",onChange:o=>{const r=o.target.files?.[0]||null;e.setFieldValue("contactUsVideo",r)}}),t.jsx("button",{type:"button",onClick:()=>p.current?.click(),className:"px-8 py-3  rounded-lg font-estedad-medium bg-purple-500/60 text-white hover:bg-purple-600/60 transition-colors",children:"انتخاب فایل"}),e.values.contactUsVideo&&e.values.contactUsVideo instanceof File&&t.jsx("span",{className:"text-sm text-dark font-estedad-light",children:e.values.contactUsVideo.name}),a?.contactUsVideo&&!e.values.contactUsVideo&&t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center ",children:[t.jsx("video",{src:`${a.contactUsVideo}`,controls:!0,className:"w-24 h-24 rounded-lg object-cover"}),t.jsx("span",{className:"text-sm text-paragray",children:"ویدیوی فعلی"})]})]})]})]})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"محتوای صفحه درباره ما"}),t.jsx(H,{value:e.values.aboutUsContent||"",onChange:o=>e.setFieldValue("aboutUsContent",o),labelText:"محتوای صفحه",placeholder:"محتوای صفحه درباره ما را اینجا وارد کنید...",errorMessage:e.touched.aboutUsContent&&e.errors.aboutUsContent?e.errors.aboutUsContent:null})]}),t.jsxs("div",{className:"bg-white/50 p-6 rounded-lg border-2 border-purple-200",children:[t.jsx("h3",{className:"text-lg font-estedad-semibold text-dark mb-4",children:"محتوای صفحه دکتر شوید"}),t.jsx(H,{value:e.values.becomeDoctorContent||"",onChange:o=>e.setFieldValue("becomeDoctorContent",o),labelText:"محتوای صفحه",placeholder:"محتوای صفحه دکتر شوید را اینجا وارد کنید...",errorMessage:e.touched.becomeDoctorContent&&e.errors.becomeDoctorContent?e.errors.becomeDoctorContent:null})]}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsxs("button",{type:"submit",className:"purple-btn flex items-center gap-2",disabled:e.isSubmitting,children:["ذخیره تنظیمات",e.isSubmitting&&t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"})]})})]})})}function ce(){const n=B.c(4),{setHeaderConfig:i}=G();let u,d;n[0]!==i?(u=()=>(i({title:"تنظیمات سایت"}),()=>{i({title:void 0,backButton:!1})}),d=[i],n[0]=i,n[1]=u,n[2]=d):(u=n[1],d=n[2]),m.useEffect(u,d);let p;return n[3]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("main",{children:t.jsxs(K,{children:[t.jsx("h5",{className:"main-header mb-6",children:"ویرایش تنظیمات"}),t.jsx(Y,{})]})}),n[3]=p):p=n[3],p}export{ce as default};
